#
# @lc app=leetcode.cn id=2116 lang=python3
#
# [2116] 判断一个括号字符串是否有效
#

# @lc code=start
from typing import List


class Solution:
    def canBeValid(self, s: str, locked: str) -> bool:
        n, l, r = len(s), 0, 0
        if n & 1 == 1:
            return False
        for i in range(n):
            if locked[i] == '1' and s[i] == ')':
                r += 1
                if i + 1 - r < r:
                    return False

        for i in range(n - 1, -1, -1):
            if locked[i] == '1' and s[i] == '(':
                l += 1
                if n - i - l < l:
                    return False
        return True


# s = Solution()
# print(s.canBeValid("))()))", "010100"))
# print(s.canBeValid("()()", "0000"))
# print(s.canBeValid(")", "0"))
# f = "()()))()())(((()((()((()((()()()))(()()((()((()()(((()())))))()((()(()(())((()()((())))))))(())(())))()()()((()())())(()()))((((((())()())())))))())((((()())(())(())()()()(()(()((()))((((()((()((()())(())((((())(())))(()((((())))((()(((((()()))))((((()))))())()))))())"
# l = "0111000100000011110100010110101001110111010111110111111011101000100000011101010000110110001100100100100011000001110101101110011000000011111000111111111001011101100000100111010111010000001100011101000110101011001000100100111110110110100101010111111001000010000010010010"
# f = "((((()))((((((())(())))((()))()))()())(()()))()())(()(((()((())))(()()))()()())((()()()()))()))()(())()(())(()())())((())())))((()()((()(()(()))(((()(((()))())(())()))()((())))()(())()))(((()))((((())()))(((((()(()(()()(())())(())((()())(())((())((((())(()((((()))())()()(()()))()()((()()()()())(()(()(()))())())(())()())((((())))((((())(()()()(())())(()()((())(()((()()())))))))()((()((()())((()()(()))()(((()))(()(()))()))((((((((((((())())()))))((()(()()(())((((()))))())()()(()()(()((())(()(()((()((()))())))(()))()()))(((((())((()((()()(((())((((((((())())))))))(((())))))(()())(()))((()()))))))))())()))()(()())(())(((()))((())))(()())((()((())())())(()()(())(()()()(((()()(()))()((())()))))((()))()()(((((((()()))())())))(((())((()))(((())(()())())(())()()))))(()(())())()))))(()())(((((()))((()()))()())(()())(()(()())(((((())))(()()))()(()()))()(()(()(((())()()))()()((()()))(()()((((()))((()))())))))()()())))())())(((()))(((()(()))(()(()((())(())()))()(())()())(((((()())))))()()((()(()())(())(()()()())())))())((((((()))))())((())((((()()((())()()()))))))()(())((()))))()())((()(())()((()()()((())()(()()()))))()()((((()(((())()))()((((()())))((((()())))))()()()(()())(((()())))((())())))())((()()()))((()((((((())(((((()(()())))()(((()))))((((()()()))(()))((()))((()(()))(())(()())))(((())()))()()()()))))())((())))()()))(((((()(())))))))((()(()(((())()()(())))(()))(())()))())(((()()(()((()))))((()()((()(((())((()((()()()()))))))(()((((((((())())((()(((())()))())()()))((((()((())()))))(()))()()))))((())(())(()))()()))()((()(())()((((((()))()())()()))()))))((())())()((()()(()()((((()((()()()()))())))()((((()))())()(()))())())((((()))(())(()))((())))(()())())((()))()))))(())()((((())()()))(((()(())((((()(()))))))))(()()()(())((()()"
# l = "1100010101111010100110101000001100101000101100010011011001100010101101001011000001011000000100110011001100111000001000100010110010010001010101001000011011001001111100000101001010100110001011000010011110010100000111111001110001111101010000101100000110110011101000111001000000000000011110100011110100010110001000111110100011100001101101110000010101101001000110111111101101011111110011100011101011010111001000100100010100101100111100100000101011101100001000100100110001000011101001101000111111100101101000111010111001100010111011110101100010111111010111001110100100011100010111010100010100111100010010000101001011111100011001101000110111011011101001011000101010101000110100011101010010011100100111011011010011101101110001011110010000101000110010110101001101001010111000110010110110010000100101010100110110011001111001000101111100000010000001101011111110100100100111011100100110001100110010000000010000000100110111001011000101000110001101000010110011011101101100011111001000101010011101001100100111101100110011001000000001001111001001000100110000101000101001010111111111110101011010001111010101011100001111110101011001010111000100110100100101001011110100110000100111110101011010010010110111010000010000001110111000000111100111011010001010101110101101111101001110100101100101110100101110010011101000101010000111011000111011111001111101100000111100111110000110101111110011010111100010100111000000100010010011010100011101110101010011010001010011101111111100110101111100100111011001110100001110111010101001011101101011110011101011100000010011000101010101110010100101111111101010000110100100010010010000001001010110111000011100001101010111111011101111010001111100010010001100011011011100001101011000101100010010101100011110010101101100100000111010011011110100"
# print(s.canBeValid(f, l))
# @lc code=end
